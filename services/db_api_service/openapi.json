{"openapi":"3.1.0","info":{"title":"Storage DB API","version":"1.1.0"},"paths":{"/healthz":{"get":{"summary":"Healthz","operationId":"healthz_healthz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/ready":{"get":{"summary":"Ready","operationId":"ready_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/auth/login":{"post":{"tags":["auth"],"summary":"Login","operationId":"login_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_auth_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/refresh":{"post":{"tags":["auth"],"summary":"Refresh Token","operationId":"refresh_token_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/_dev_bootstrap":{"post":{"tags":["auth"],"summary":"Dev Bootstrap","operationId":"dev_bootstrap_auth__dev_bootstrap_post","requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/DevBootstrapIn"},{"type":"null"}],"title":"Body"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/files":{"post":{"tags":["api","files"],"summary":"Create Or Upsert File","operationId":"create_or_upsert_file_api_files_post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FilesCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["api","files"],"summary":"List Files","operationId":"list_files_api_files_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"bucket","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Bucket"}},{"name":"device_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Device Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/files/{bucket}/{object_key}":{"put":{"tags":["api","files"],"summary":"Update File","operationId":"update_file_api_files__bucket___object_key__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"bucket","in":"path","required":true,"schema":{"type":"string","title":"Bucket"}},{"name":"object_key","in":"path","required":true,"schema":{"type":"string","title":"Object Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FilesUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["api","files"],"summary":"Get File","operationId":"get_file_api_files__bucket___object_key__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"bucket","in":"path","required":true,"schema":{"type":"string","title":"Bucket"}},{"name":"object_key","in":"path","required":true,"schema":{"type":"string","title":"Object Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["api","files"],"summary":"Delete File","operationId":"delete_file_api_files__bucket___object_key__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"bucket","in":"path","required":true,"schema":{"type":"string","title":"Bucket"}},{"name":"object_key","in":"path","required":true,"schema":{"type":"string","title":"Object Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/me":{"get":{"tags":["api"],"summary":"Me","operationId":"me_api_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"Body_login_auth_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"password"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_auth_login_post"},"DevBootstrapIn":{"properties":{"service_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Name"},"rotate_if_exists":{"type":"boolean","title":"Rotate If Exists","default":false}},"type":"object","title":"DevBootstrapIn"},"FilesCreate":{"properties":{"bucket":{"type":"string","title":"Bucket"},"object_key":{"type":"string","title":"Object Key"},"content_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content Type"},"size_bytes":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Size Bytes"},"etag":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Etag"},"mission_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Mission Id"},"device_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Device Id"},"tile_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tile Id"},"footprint":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Footprint"},"metadata":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["bucket","object_key"],"title":"FilesCreate"},"FilesUpdate":{"properties":{"content_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content Type"},"size_bytes":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Size Bytes"},"etag":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Etag"},"mission_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Mission Id"},"device_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Device Id"},"tile_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tile Id"},"footprint":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Footprint"},"metadata":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","title":"FilesUpdate"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"RefreshIn":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshIn"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/auth/login"}}}}}}