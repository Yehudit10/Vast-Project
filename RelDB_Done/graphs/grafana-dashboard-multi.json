{
    "id": null,
    "title": "Postgres â€“ Selected Metrics",
    "tags": ["postgres", "prometheus"],
    "timezone": "browser",
    "schemaVersion": 36,
    "version": 1,
    "refresh": "10s",
    "panels": [
      {
        "type": "timeseries",
        "title": "WAL Throughput (bytes/s)",
        "datasource": "Prometheus",
        "targets": [
          { "expr": "rate(pg_wal_stats_wal_bytes[30m])", "legendFormat": "WAL bytes/s" }
        ],
        "gridPos": { "x": 0, "y": 0, "w": 12, "h": 8 }
      },
      {
        "type": "timeseries",
        "title": "BRIN Hit Ratio by Index",
        "datasource": "Prometheus",
        "targets": [
          { "expr": "pg_brin_index_io_brin_hit_ratio", "legendFormat": "{{schemaname}}.{{index_name}}" }
        ],
        "gridPos": { "x": 12, "y": 0, "w": 12, "h": 8 }
      },
      {
        "type": "timeseries",
        "title": "Transactions per Second (TPS)",
        "datasource": "Prometheus",
        "targets": [
          { "expr": "rate(pg_stat_database_xact_commit[1m]) + rate(pg_stat_database_xact_rollback[1m])", "legendFormat": "TPS" }
        ],
        "gridPos": { "x": 0, "y": 8, "w": 12, "h": 8 }
      },
      {
        "type": "timeseries",
        "title": "Cache Hit Ratio",
        "datasource": "Prometheus",
        "targets": [
          { "expr": "pg_stat_database_blks_hit / (pg_stat_database_blks_hit + pg_stat_database_blks_read)", "legendFormat": "Hit Ratio" }
        ],
        "gridPos": { "x": 12, "y": 8, "w": 12, "h": 8 }
      },
      {
        "type": "timeseries",
        "title": "Active Connections",
        "datasource": "Prometheus",
        "targets": [
          { "expr": "pg_stat_activity_count{state=\"active\"}", "legendFormat": "Active" },
          { "expr": "pg_stat_activity_count{state=\"idle\"}", "legendFormat": "Idle" }
        ],
        "gridPos": { "x": 0, "y": 16, "w": 24, "h": 8 }
      }
    ]
  }
  